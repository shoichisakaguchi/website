---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import SummitDetail from "../../components/SummitDetail.astro";

export const prerender = true;

export async function getStaticPaths() {
  const summits = await getCollection("summits");
  return summits.map((item) => ({
    params: { slug: item.slug },
    props: { item },
  }));
}

const { item } = Astro.props;
---

<Layout
  title={item.data.title}
  description={item.data.description}
  image={item.data.heroImage}
>
  <div class="page-content" data-pagefind-body>
    <SummitDetail item={item} variant="summit" />
  </div>
</Layout>

<style>
  /* 
   * We don't need much styling here because SummitDetail handles it.
   * But we validly might want a wrapper if SummitDetail expects a parent container 
   * for the "summit" variant. 
   * In the updated SummitDetail, "summit" variant does NOT have a full-width header wrapper
   * around the content, but it uses .container for inner content?
   * Wait, let's check SummitDetail again.
   * 
   * SummitDetail structure:
   * <div class="summit-detail">
   *   <div class="header-wrapper">...</div> <-- handles full width background if home
   *   <div class="container content-wrapper">...</div> <-- handles main content width
   * </div>
   * 
   * If variant="summit":
   * header-wrapper exists but doesn't have the rich background.
   * header-container (inner) has `max-width: 980px`.
   * So the header will be centered.
   * content-wrapper has `max-width: 980px`.
   * 
   * So we don't strictly need .page-content constraint here if SummitDetail handles it.
   * But keeping it safe doesn't hurt.
   * However, if we constrain .page-content to 980px, it matches SummitDetail.
   */
</style>
